{% extends "base.html" %}
{% load static %}

{% block title %}
Credit card calculator
{% endblock %}
{% block content %}
    <div class="loan_repay">
        <h1>Credit card calculator</h1>
    </div>
    <div class="loan_repa">
        <div class="loan_rep">
            <h3>Credit card calculator</h5>
            <div class="loan_line">
            </div>
            <h3>Enter your detials</h4>
            <div class="loan_line">
            </div>
            <div class="loan_re">
                <form method="post">
                    {% csrf_token %}
                    <div class="call">
                        <div class="lab">
                            <label>Credit Card Balance (â‚¹):</label>
                            <label>Annual Interest Rate (%):</label>
                            <label>Monthly Payment (â‚¹):</label>
                        </div>
                        <div class="inp">
                            <input type="number" name="rate" step="0.01" required><br><br>
                            <input type="number" name="interest_rate" step="0.01" required><br><br>
                            <input type="number" name="monthly_payment" step="0.01" required><br><br>
                        </div>
                    </div>
                    <div class="bu">
                        <button type="submit">Calculate</button>
                    </div>
                </form>
            </div>
            <h3 style="margin-top:20px;">View your results</h4>
            <div class="loan_line">
            </div>
            <div class="cal_loan">
                {% if result %}
                    {% if result.error %}
                        <p style="color:red;">{{ result.error }}</p>
                    {% else %}
                        <h3>ðŸ“Š Results:</h3>
                        <ul>
                            <li><strong>Initial Balance:</strong> â‚¹{{ result.original_balance }}</li>
                            <li><strong>Interest Rate:</strong> {{ result.interest_rate }}%</li>
                            <li><strong>Monthly Payment:</strong> â‚¹{{ result.monthly_payment }}</li>
                            <li><strong>Total Interest Paid:</strong> â‚¹{{ result.total_interest|floatformat:2 }}</li>
                            <li><strong>Months to Pay Off:</strong> {{ result.months }}</li>
                        </ul>
                        <p><strong>{{ result.message }}</strong></p>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}