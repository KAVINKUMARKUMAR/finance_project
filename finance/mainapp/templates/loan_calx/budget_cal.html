{% extends "base.html" %}
{% load static %}

{% block title %}
Budget planner
{% endblock %}
{% block content %}
    <div class="loan_repay">
        <h1>Budget planner</h1>
    </div>
    <div class="loan_repa">
        <div class="loan_rep">
            <h3>Budget planner</h5>
            <div class="loan_line">
            </div>
            <h3>Enter your detials</h4>
            <div class="loan_line">
            </div>
            <div class="loan_re">
                <form method="post">
                    {% csrf_token %}
                    <div class="call">
                        <div class="lab">
                            <label>Monthly Income (â‚¹):</label>
                            <label>Housing (â‚¹):</label>
                            <label>Food (â‚¹):</label>
                            <label>Transportation (â‚¹):</label>
                            <label>Utilities (â‚¹):</label>
                            <label>Entertainment (â‚¹):</label>
                            <label>Other Expenses (â‚¹):</label>
                        </div>
                        <div class="inp">
                            <input type="number" name="income" step="0.01" ><br><br>
                            <input type="number" name="housing" step="0.01" ><br><br>
                            <input type="number" name="food" step="0.01" ><br><br>
                            <input type="number" name="transportation" step="0.01" ><br><br>
                            <input type="number" name="utilities" step="0.01" ><br><br>
                            <input type="number" name="entertainment" step="0.01" ><br><br>
                            <input type="number" name="others" step="0.01" ><br><br>
                        </div>
                    </div>
                    <div class="bu">
                        <button type="submit">Calculate</button>
                    </div>
                </form>
            </div>
            <h3 style="margin-top:20px;">View your results</h4>
            <div class="loan_line">
            </div>
            <div class="cal_loan">
                {% if income %}
                    <h3>ðŸ’¡ Results:</h3>
                    <p><strong>Total Income:</strong> â‚¹{{ income }}</p>
                    <p><strong>Total Expenses:</strong> â‚¹{{ expenses }}</p>
                    <p>
                        <strong>Balance:</strong> 
                        {% if balance >= 0 %}
                            <span style="color:green;">â‚¹{{ balance|floatformat:2 }} (Savings)</span>
                        {% else %}
                            <span style="color:red;">â‚¹{{ balance|floatformat:2 }} (Over budget)</span>
                        {% endif %}
                    </p>
                
                    <h4>ðŸ§¾ Breakdown:</h4>
                    <ul>
                        {% for category, amount in details.items %}
                            <li>{{ category }}: â‚¹{{ amount }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}